<div class="quiz-container">
    <div class="quiz-header">
        <h1>Kategoria: {{ currentCategory() | titlecase }}</h1>
        @if (state().status === 'success') {
            <p class="question-progress">
                Pytanie {{ currentQuestionIndex() + 1 }} z {{ questions().length }}
            </p>
        }
    </div>

    <div class="question-wrapper">
        @switch (state().status) {
            @case ('loading') {
                <div class="loading">
                    <p>Ładowanie pytań...</p>
                </div>
            }
            @case ('error') {
                <div class="error">
                    <p>{{ state().error }}</p>
                    <button mat-raised-button color="warn" (click)="loadQuestions()">
                        Ponów
                    </button>
                </div>
            }
            @case ('success') {
                <app-question [question]="currentQuestion()"></app-question>
            }
        }
    </div>

    @if (state().status === 'success' && questions().length > 0) {
        <div class="navigation-buttons">
            <button
                mat-raised-button
                [disabled]="isFirstQuestion()"
                (click)="previousQuestion()"
            >
                Poprzedni
            </button>

            <button
                mat-raised-button
                [disabled]="isLastQuestion()"
                (click)="nextQuestion()"
            >
                Następny
            </button>
        </div>
    }
</div>
